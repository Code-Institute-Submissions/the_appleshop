{% extends 'base.html' %}
{% load static from staticfiles %}
{% load bootstrap_tags %}
{% block head_js %}
{% endblock head_js %}
{% block content %}

<div class="display">
    <form action="{% url 'search' %}" method="GET">
        <input type="text" name="q">
        <input type="text" name="searchterm" value="{{searchterm}}" hidden>

        <button type="submit">Search</button>
    </form>
</div>





{% if products %}

<p>Filter</p>
<form action="{% url 'search' %}" method="GET">
    <select name="" id="">
        <option value="date">Order by date</option>
        <option value="viewcount">Order by view count</option>
        <option value="bestseller">Order by bestseller</option>

    </select>
    <input type="text" name="searchterm" value="{{searchterm}}" hidden>

    <button type="submit">Search</button>
</form>


{% for product in products %}
<div class="col-xs-10 col-xs-offset-1 col-sm-offset-0 col-sm-6 col-md-4 display panel panel-default">
    <div class="panel-body">
        <img src="{{ MEDIA_URL }}{{product.image}}" alt="image of {{product.name}}" style="width:150px;height:150px;">
        <!--
            <div class="product" style="background-image: url('{{ MEDIA_URL }}{{product.image}}')"></div>-->
        <h3><a href="{% url 'product_detail' product.id %}">{{product.name}}</a></h3>
        {% if product.id in wishlist %}
        <form method="POST" action="{% url 'remove_from_wishlist' product.id %}">
            {% csrf_token %}
            <span class="input-group-btn">
                <button class="btn btn-success" type="submit">Remove</button>
            </span>
        </form>
        {% else %}
        <form method="POST" action="{% url 'add_to_wishlist' product.id %}">
            {% csrf_token %}
            <span class="input-group-btn">
                <button class="btn btn-success" type="submit">Add</button>
            </span>
        </form>
        {% endif %}
        <p class="product-description">{{ product.description }}</p>
        <p>{{ product.price }}</p>
        <form method="POST" action="{% url 'add_to_cart' product.id %}">
            {% csrf_token %}
            <div class="input-group">
                <input name="quantity" type="number" min="1" max="999" class="form-control" placeholder="Quantity">
                <span class="input-group-btn">
                    <button class="btn btn-success" type="submit">Add</button>
                </span>
            </div>
        </form>
    </div>
</div>
{% endfor %}
{% else %}
<p>No results have been found.</p>
{% endif %}
{% endblock %}